import"./bootstrap.min-78670b47.js";import{a as m}from"./axios-28bc18a3.js";const h="http://localhost:3000",d=document.querySelector(".confirmEmail"),s=document.querySelector("#inputEmail"),i=document.querySelector("#inputPassword"),u=document.querySelector("#inputConfirmPassword"),y=document.querySelector("#rulesChecked");let c=[],f=[];console.log(y.checked);function l(r,n){r.parentElement.children[2].style.display="flex",r.parentElement.children[2].children[0].children[0].textContent=`${n}`}function g(r,n){let e=!1;return/^[a-zA-Z0-9]{8,}$/.test(n)?(n.length<6||n.length>12)&&(e=!0):e=!0,r===u&&n!==c[0]?e=!0:r===i&&e===!1?c.push(n):c=[],e}function p(r){const n=["gmail.com","yahoo.com.tw"];let e=!1;function t(){for(let o=0;o<n.length;o++)if(n[o]===r[1])return!1;return!0}return(r.length!==2||r.some(o=>o==="")||t())&&(e=!0),e}function a(r,n){const e=n.trim();return console.log(typeof e),e===""?(l(r,"請勿空白!"),!1):r===s&&p(e.split("@"))?(l(r,"請填寫正確信箱!"),!1):(r===i||r===u)&&g(r,e)?(l(r,"請填寫正確密碼!"),!1):(r.parentElement.children[2].style.display="none",e)}async function E(r){try{const e=(await m.get(h+"/users")).data;let t=!0;return e.forEach(o=>{o.email===r&&(l(s,"這個帳號已經註冊過"),t=!1)}),console.log("state",t),t}catch(n){return console.error("Error fetching user information:",n),!1}}d.addEventListener("click",async r=>{[s,i,u].forEach(async e=>{if(e===s){if(typeof a(e,e.value)===String){const t=a(e,e.value);console.log("等待結果"+await E(t))}}else f.push(a(e,e.value))}),console.log(f)});

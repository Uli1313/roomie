import"./bootstrap.min-340b141d.js";import{a as i}from"./axios-28bc18a3.js";const u="https://roomie-lfta.onrender.com",m=document.querySelector(".confirmEmail"),a=document.querySelector("#inputEmail"),o=document.querySelector("#inputPassword");async function c(e,n){const t=n.trim();return t===""?(l(e,"請勿空白!"),!1):e===a&&await f(t)?(l(e,"這個帳號尚未註冊過"),!1):(e.parentElement.children[2].style.display="none",!0)}function l(e,n){e.parentElement.children[2].style.display="flex",e.parentElement.children[2].children[0].children[0].textContent=`${n}`}async function f(e){try{const t=(await i.get(u+"/users")).data;let r=!1;return t.filter(d=>d.email===e).length===1||(r=!0),r}catch(n){console.error("Error fetching user information:",n)}}function h(e,n){i.post(u+"/login",{email:`${e}`,password:`${n}`}).then(t=>{o.parentElement.children[2].style.display="none",console.log(t.data);const r=t.data.accessToken,s=t.data.user.id;localStorage.setItem("token",r),localStorage.setItem("userId",s),p()}).catch(t=>{l(o,"會員密碼不正確")})}function p(){setTimeout(()=>{location.href="user.html"},1e3)}m.addEventListener("click",async e=>{c(a,a.value)&&await c(o,o.value)&&h(a.value,o.value)});

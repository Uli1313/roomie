import{a as u}from"./bootstrap.min-f14bc68a.js";import"https://unpkg.com/@wangeditor/editor@latest/dist/index.js";import{S as f}from"./sweetalert2.all-9c23d2ec.js";const p="https://roomie-lfta.onrender.com",h=localStorage.getItem("userId"),v=localStorage.getItem("token"),L={headers:{Authorization:`Bearer ${v}`}};let g;const r=document.querySelectorAll(".nav-logged"),i=document.querySelectorAll(".nav-unlogged"),S=document.querySelectorAll(".nav-logged-photo");(async()=>{try{const e=`/600/users/${h}`,t=`${p}${e}`,o=await u.get(t,L),c=o.data.photo;S.forEach(s=>s.setAttribute("src",c)),g=o.data,w(),r.forEach(s=>{s.classList.remove("d-none")}),i.forEach(s=>{s.classList.add("d-none")}),console.log("已登入")}catch(e){console.log(e),r.forEach(t=>{t.classList.add("d-none")}),i.forEach(t=>{t.classList.remove("d-none")}),console.log("未登入")}})();function w(){localStorage.setItem("user",JSON.stringify(g))}const y="https://roomie-lfta.onrender.com/",b="/contacts",E=`${y}${b}`,n=document.querySelector(".contact-form"),d=n.querySelector("#form-content"),I=n.querySelector("#contact-email"),m=n.querySelector(".email-error"),q={post:function(e){const t={...e,userId:Number(localStorage.getItem("userId")),isReply:!1};return u.post(E,t).then(function(o){return f.fire({scrollbarPadding:!1,icon:"success",title:"謝謝您的意見，我們將會在兩週內透過電子郵件聯絡您。",showConfirmButton:!1,timer:1500,allowOutsideClick:!1}),console.log(o),o.data}).catch(function(o){console.log(o)})}};let a;I.addEventListener("input",e=>{const{value:t}=e.target;t||(m.textContent="請輸入您的電子郵件"),l(t)||(m.textContent="信箱格式錯誤")});n.addEventListener("submit",e=>{e.preventDefault();const t=n["contact-name"].value,o=n["contact-email"].value;if(t?n["contact-name"].classList.remove("is-invalid"):n["contact-name"].classList.add("is-invalid"),!o||!l(o)?n["contact-email"].classList.add("is-invalid"):n["contact-email"].classList.remove("is-invalid"),!a||a==="<p><br></p>"?d.classList.add("is-invalid"):d.classList.remove("is-invalid"),console.log(n.querySelectorAll(".invalid-feedback")),!t||!o||!l(o)||!a||a==="<p><br></p>")return;const c={name:t,mail:o,content:a};q.post(c),console.log(c),n.reset()});function l(e){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)}const{createEditor:U,createToolbar:x}=window.wangEditor,$={placeholder:"請輸入留言內容",onChange(e){a=e.getHtml()}};U({selector:"#editor-container",html:"<p><br></p>",config:$,mode:"simple"});

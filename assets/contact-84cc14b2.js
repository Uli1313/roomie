import{a as m,S as c}from"./bootstrap.min-acd3fe77.js";const f="https://roomie-lfta.onrender.com",v=localStorage.getItem("userId"),h=localStorage.getItem("token"),p={headers:{Authorization:`Bearer ${h}`}};let g;const r=document.querySelectorAll(".nav-logged"),i=document.querySelectorAll(".nav-unlogged"),S=document.querySelectorAll(".nav-logged-photo"),L=document.querySelector(".logout-btn");(async()=>{try{const e=`/600/users/${v}`,t=`${f}${e}`,a=await m.get(t,p),s=a.data.photo;S.forEach(n=>n.setAttribute("src",s)),g=a.data,y(),r.forEach(n=>{n.classList.remove("d-none")}),i.forEach(n=>{n.classList.add("d-none")})}catch(e){console.log(e),r.forEach(t=>{t.classList.add("d-none")}),i.forEach(t=>{t.classList.remove("d-none")})}})();function y(){localStorage.setItem("user",JSON.stringify(g))}L.addEventListener("click",w);function w(){c.fire({icon:"question",title:"確定要登出嗎",showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"取消"}).then(e=>{e.isConfirmed&&(localStorage.removeItem("userId"),localStorage.removeItem("token"),localStorage.removeItem("user"),c.fire({icon:"success",title:"已登出",timer:1500,showConfirmButton:!1}),setTimeout(()=>{location.href="login.html"},1e3))})}const I="https://roomie-lfta.onrender.com/",q="contacts",x=`${I}${q}`,o=document.querySelector(".contact-form"),d=o.querySelector("#content-txt"),E=o.querySelector("#contact-email"),u=o.querySelector(".email-error"),U={async post(e){try{const t={...e,userId:Number(localStorage.getItem("userId")),isReply:!1},a=await m.post(`${x}`,t);return c.fire({scrollbarPadding:!1,icon:"success",title:"感謝您的留言，我們將於 7 - 14 天內給予您答覆！",showConfirmButton:!1,timer:1500,allowOutsideClick:!1}),console.log(a),a.data}catch(t){console.log(t)}}};E.addEventListener("input",e=>{const{value:t}=e.target;t||(u.textContent="請輸入您的電子郵件"),l(t)||(u.textContent="信箱格式錯誤")});o.addEventListener("submit",e=>{e.preventDefault();const t=o["contact-name"].value,a=o["contact-email"].value,s=o["content-txt"].value;if(t?o["contact-name"].classList.remove("is-invalid"):o["contact-name"].classList.add("is-invalid"),!a||!l(a)?o["contact-email"].classList.add("is-invalid"):o["contact-email"].classList.remove("is-invalid"),s?d.classList.remove("is-invalid"):d.classList.add("is-invalid"),console.log(o.querySelectorAll(".invalid-feedback")),!t||!a||!l(a)||!s)return;const n={name:t,mail:a,txt:s};U.post(n),console.log(n),o.reset()});function l(e){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)}

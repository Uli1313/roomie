import"./bootstrap.min-e773685c.js";import{a as i}from"./axios-28bc18a3.js";const d="https://roomie-lfta.onrender.com",u=document.querySelector(".confirmEmail"),a=document.querySelector("#inputEmail"),r=document.querySelector("#inputPassword");async function c(e,n){const t=n.trim();return t===""?(l(e,"請勿空白!"),!1):e===a&&await f(t)?(l(e,"這個帳號尚未註冊過"),!1):(e.parentElement.children[2].style.display="none",!0)}function l(e,n){e.parentElement.children[2].style.display="flex",e.parentElement.children[2].children[0].children[0].textContent=`${n}`}async function f(e){try{const t=(await i.get(d+"/users")).data;let o=!1;return t.filter(m=>m.email===e).length===1||(o=!0),o}catch(n){console.error("Error fetching user information:",n)}}function h(e,n){i.post(d+"/login",{email:`${e}`,password:`${n}`}).then(t=>{r.parentElement.children[2].style.display="none",console.log(t.data);const o=t.data.accessToken,s=t.data.user.id;localStorage.setItem("token",o),localStorage.setItem("userId",s),p()}).catch(t=>{l(r,"會員密碼不正確")})}function p(){setTimeout(()=>{window.location.href="http://localhost:5173/roomie/pages/user.html"},1e3)}u.addEventListener("click",async e=>{c(a,a.value)&&await c(r,r.value)&&h(a.value,r.value)});
